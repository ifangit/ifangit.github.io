
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8" />
        <title>ifanの小窝</title>
        <meta name="author" content="ifan" />
        <meta name="description" content="风带来故事的种子" />
        <meta name="keywords" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <link rel="icon" href="/images/favicon.png" />
        <script src="https://cdn.staticfile.org/vue/3.2.47/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.3.0/css/all.min.css" />
<link rel="stylesheet" href="/css/fonts.min.css" />
<script> const mixins = {}; </script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<script src="https://cdn.staticfile.org/highlight.js/11.7.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.org/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
<link
    rel="stylesheet"
    href="https://cdn.staticfile.org/highlight.js/11.7.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>


<script src="https://cdn.staticfile.org/KaTeX/0.16.4/katex.min.js"></script>
<script src="https://cdn.staticfile.org/KaTeX/0.16.4/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.16.4/katex.min.css" />
<script src="/js/lib/math.js"></script>


<script src="/js/lib/preview.js"></script>





<script src="/js/lib/home.js"></script>

<link rel="stylesheet" href="/css/main.css" />

    <meta name="generator" content="Hexo 6.3.0"></head>
    <body>
        <div id="layout">
            <transition name="fade">
                <div id="loading" v-show="loading">
                    <div id="loading-circle">
                        <h2>Loading</h2>
                        <p>加载过慢请开启缓存 浏览器默认开启</p>
                        <img src="/images/loading.gif" />
                    </div>
                </div>
            </transition>
            <nav id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <div id="desktop-menu">
        <a class="title" href="/">
            <span>IFANの小窝</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;主页</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;关于</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;归档</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;分类</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;标签</span>
        </a>
        
    </div>
    <div id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;IFANの小窝</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">主页</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">关于</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">归档</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">分类</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">标签</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </div>
</nav>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

            <transition name="into">
                <div id="main" v-show="!loading">
                    <div id="home-head">
    <div id="home-background" ref="homeBackground" data-images="/images/background.jpg"></div>
    <div id="home-info" @click="homeClick">
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="loop"></span>
        <span class="info">
            <div class="wrap">
                <h1>ifanの小窝</h1>
                <h3></h3>
                <h5>风带来故事的种子</h5>
            </div>
        </span>
    </div>
</div>
<div id="home-posts-wrap" true ref="homePostsWrap">
    <div id="home-posts">
        

<div class="post">
    <a href="/2023/07/22/linux%E9%A9%B1%E5%8A%A8%E4%B8%AD%E6%96%AD/">
        <h2 class="post-title">linux驱动中断</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/linux%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                linux驱动开发
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/7/22
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>在裸机实验中处理中断的方法可以总结为以下步骤：</p>
<ol>
<li>使能中断：需要初始化相应的寄存器来允许中断的触发和处理。这通常涉及设置特定的中断控制寄存器或标志位。</li>
<li>注册中断服务函数：将中断服务函数注册到中断向量表或中断处理表中。这可以通过将中断服务函数的地址写入指定标号的中断表项或中断向量表项来完成。</li>
<li>中断发生：当发生中断时，处理器会跳转到IRQ中断服务函数的入口地址。这是由中断控制器或处理器硬件自动完成的。</li>
<li>中断服务函数处理：在IRQ中断服务函数中，可以通过访问中断表或中断向量表，根据中断号查找具体的中断处理函数，并执行相应的中断处理逻辑。</li>
</ol>
<p>API 函数：</p>
<p>当涉及到Linux中断API函数时，以下是一些常见的函数和它们的详细说明：</p>
<ul>
<li><code>request_irq()</code>函数：该函数用于请求和注册中断处理函数。它的原型如下：</li>
</ul>
<pre><code class="c">int request_irq(unsigned int irq, irq_handler_t handler, unsigned long flags,
                const char *name, void *dev);
</code></pre>
<ul>
<li>参数<code>irq</code>：指定中断号。</li>
<li>参数<code>handler</code>：中断处理函数的指针，是一个具有特定签名的函数，用于实际处理中断。</li>
<li>参数<code>flags</code>：指定中断处理的属性和行为，如中断类型、中断共享等。</li>
<li>参数<code>name</code>：中断的名称，用于标识中断处理。</li>
<li>参数<code>dev</code>：传递给中断处理函数的设备数据。</li>
</ul>
<table>
<thead>
<tr>
<th>标志位</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>IRQF_TRIGGER_LOW</td>
<td>指定中断触发电平为低电平。</td>
</tr>
<tr>
<td>IRQF_TRIGGER_HIGH</td>
<td>指定中断触发电平为高电平。</td>
</tr>
<tr>
<td>IRQF_TRIGGER_FALLING</td>
<td>指定中断触发边沿为下降沿。</td>
</tr>
<tr>
<td>IRQF_TRIGGER_RISING</td>
<td>指定中断触发边沿为上升沿。</td>
</tr>
<tr>
<td>IRQF_TRIGGER_BOTH</td>
<td>指定中断触发边沿为双边沿。</td>
</tr>
<tr>
<td>IRQF_SHARED</td>
<td>指定中断为共享中断。</td>
</tr>
<tr>
<td>IRQF_NO_SUSPEND</td>
<td>指定中断在系统暂停（suspend）期间不会被自动屏蔽。</td>
</tr>
<tr>
<td>IRQF_NO_THREAD</td>
<td>指定中断处理函数不运行在独立的内核线程中，而是在中断上下文中执行。</td>
</tr>
<tr>
<td>IRQF_ONESHOT</td>
<td>指定中断为一次性中断。</td>
</tr>
<tr>
<td>IRQF_TRIGGER_PROBE</td>
<td>指定中断为探测中断。</td>
</tr>
</tbody></table>
<p>该函数会请求指定的中断，并将中断处理函数与中断号相关联。成功注册中断处理后，中断将被触发时调用指定的中断处理函数。</p>
<ul>
<li><code>free_irq()</code>函数：该函数用于释放先前注册的中断处理函数。它的原型如下：</li>
</ul>
<pre><code class="c">void free_irq(unsigned int irq, void *dev);
</code></pre>
<ul>
<li>参数<code>irq</code>：指定中断号。</li>
<li>参数<code>dev</code>：之前传递给<code>request_irq()</code>函数的设备数据。</li>
</ul>
<p>该函数用于解除中断处理函数与中断号的关联，停止对指定中断的处理。在不再需要某个中断时，应使用该函数进行释放，以便其他设备或模块可以使用该中断。</p>
<ul>
<li><code>enable_irq()</code>和<code>disable_irq()</code>函数：这两个函数分别用于使能和禁用指定的中断。它们的原型如下：</li>
</ul>
<pre><code class="c">void enable_irq(unsigned int irq);
void disable_irq(unsigned int irq);
</code></pre>
<ul>
<li>参数<code>irq</code>：指定中断号。</li>
</ul>
<p>通过调用<code>enable_irq()</code>函数，可以使能指定的中断，允许其触发和处理。而调用<code>disable_irq()</code>函数，则可以禁用指定的中断，阻止其触发和处理。这些函数对于临时禁用或重新启用中断非常有用。</p>
<ul>
<li><code>irq_set_affinity()</code>函数：该函数用于设置中断亲和性，将中断限制在特定的处理器核心上进行处理。它的原型如下：</li>
</ul>
<pre><code class="c">int irq_set_affinity(unsigned int irq, const struct cpumask *mask);
</code></pre>
<ul>
<li>参数<code>irq</code>：指定中断号。</li>
<li>参数<code>mask</code>：指定中断要限制的处理器核心。</li>
</ul>
<p>通过调用该函数，可以将特定的中断请求限制在指定的处理器核心上进行处理，以实现更好的中断处理性能。</p>
<p>这些函数是Linux内核中常见的中断API函数，用于管理和控制中断处理。它们提供了灵活且强大的机制，使开发</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/linux%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/" style="color: #ffa2c4">linux驱动开发</a>
        </span>
        
    </div>
    <a href="/2023/07/22/linux%E9%A9%B1%E5%8A%A8%E4%B8%AD%E6%96%AD/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/07/19/%E6%8C%82%E8%BD%BDNFS%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/">
        <h2 class="post-title">挂载NFS网络文件系统实现共享文件夹</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/linux%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                linux驱动开发
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/7/19
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>挂载NFS网络文件系统实现共享文件夹</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/linux/" style="color: #ffa2c4">linux</a>
        </span>
        
    </div>
    <a href="/2023/07/19/%E6%8C%82%E8%BD%BDNFS%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/07/14/hexo%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/">
        <h2 class="post-title">hexo博客美化</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/%E6%95%99%E7%A8%8B/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                教程
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/7/14
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>hexo博客美化大全(未完待续)</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/" style="color: #ffa2c4">博客教程</a>
        </span>
        
    </div>
    <a href="/2023/07/14/hexo%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/" class="go-post">阅读全文</a>
</div>

<div class="post">
    <a href="/2023/07/12/%E7%BD%91%E7%BB%9C/">
        <h2 class="post-title">网络</h2>
    </a>
    <div class="category-and-date">
        
        <span class="category">
            <a href="/categories/linux%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                linux应用开发
            </a>
        </span>
        
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/7/12
        </span>
        
        
    </div>
    <div class="description">
        <div class="content" v-pre>
            
            <p>linux socket开发</p>

            
        </div>
    </div>
    <div class="post-tags">
        
        <span class="icon">
            <i class="fa-solid fa-tags fa-fw"></i>
        </span>
        
        
        <span class="tag">
            
            <a href="/tags/%E6%8A%80%E6%9C%AF/" style="color: #03a9f4">技术</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/%E7%BC%96%E7%A8%8B/" style="color: #00bcd4">编程</a>
        </span>
        
        <span class="tag">
            
            <a href="/tags/linux/" style="color: #00a596">linux</a>
        </span>
        
    </div>
    <a href="/2023/07/12/%E7%BD%91%E7%BB%9C/" class="go-post">阅读全文</a>
</div>


        <div class="page-current">
    <div class="prev">
        
    </div>
    <div class="page-index">
        
        <span class="current">1</span>
        
    </div>
    <div class="next">
        
    </div>
</div>

    </div>
    
    <div id="home-card">
        <div id="card-style">
    <div id="card-div">
        <div class="avatar">
            <img src="/images/avatar.jpg" alt="avatar" />
        </div>
        <div class="name">ifan</div>
        <div class="description">
            <p>一只可爱的猫娘</p>

        </div>
        
        
        <div class="friend-links">
            
            <div class="friend-link">
                <a target="_blank" rel="noopener" href="https://ifanblog.top">ifanblog</a>
            </div>
            
        </div>
        
    </div>
</div>

    </div>
    
</div>

                    <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2023 ifanの小窝
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;ifan
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

                </div>
            </transition>
            
            <transition name="fade">
                <div id="preview" ref="preview" v-show="previewShow">
                    <img id="preview-content" ref="previewContent" />
                </div>
            </transition>
            
        </div>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Ukenn2112/UkennWeb@3.0/index/web.js"></script>
        <script src="/js/main.js"></script>
        
    </body>
</html>
